<div class="space-y-4 font-mono">
  <!-- Header -->
  <div class="bg-blue-600 border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4 flex items-center justify-between gap-3 flex-wrap">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 bg-yellow-400 border-4 border-black flex items-center justify-center">
        <span class="text-2xl font-bold text-black">A</span>
      </div>
      <div>
        <h2 class="text-2xl font-bold text-white uppercase tracking-wider" style="text-shadow: 3px 3px 0 #000;">
          üîê ADMIN DASHBOARD
        </h2>
        <p class="text-yellow-300 text-xs font-bold">Performance + tasks + users</p>
      </div>
    </div>

    <button
      class="px-4 py-2 bg-cyan-400 text-black border-4 border-black shadow-[2px_2px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all font-bold uppercase text-sm"
      (click)="state.loadPerformance(); state.loadAllTasks(); state.loadAllUsers(); state.loadAllTeams()"
    >
      ‚Üª REFRESH ALL
    </button>
  </div>

  <!-- Main Grid: Tasks (left 2/3) | Sidebar (right 1/3) -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
    <!-- All Tasks (Left - 2 columns) -->
    <div class="lg:col-span-2 bg-white border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
      <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black gap-3 flex-wrap">
        <div>
          <h3 class="text-2xl font-bold text-black uppercase">üìã ALL TASKS</h3>
          <p class="text-black text-xs font-bold">Admin overview</p>
        </div>

        <button
          class="px-4 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-sm hover:bg-cyan-500"
          (click)="state.loadAllTasks()"
        >
          ‚Üª REFRESH
        </button>
      </div>

      <div *ngIf="!tasks.length" class="text-center bg-gray-100 border-2 border-black p-8">
        <p class="text-4xl mb-2">üìã</p>
        <p class="text-black font-bold uppercase">NO TASKS YET</p>
        <p class="text-xs text-black mt-1 font-bold">CREATE ONE OR REFRESH!</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-3" *ngIf="tasks.length">
        <div
          *ngFor="let task of tasks"
          class="bg-linear-to-br from-white to-gray-100 border-4 border-black p-3 shadow-[4px_4px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] transition-all"
        >
          <div class="flex items-start justify-between gap-3 mb-3">
            <div class="min-w-0">
              <h4 class="text-base font-bold text-black break-words mb-1">{{ task.title }}</h4>
              <p class="text-sm text-black break-words">{{ task.description || 'No description' }}</p>
            </div>

            <div class="flex flex-col items-end gap-1 shrink-0">
              <span
                class="px-2 py-1 border-2 border-black text-xs font-bold"
                [ngClass]="{
                  'bg-red-500 text-white': task.priority==='HIGH',
                  'bg-yellow-400 text-black': task.priority==='MEDIUM',
                  'bg-blue-400 text-white': task.priority==='LOW'
                }"
              >
                {{ task.priority }}
              </span>
              <span class="text-xs font-bold text-black">DUE: {{ task.dueDate || 'NONE' }}</span>
            </div>
          </div>

          <div class="flex items-center justify-between gap-2 text-xs mb-3">
            <span
              class="px-2 py-1 border-2 border-black font-bold"
              [ngClass]="{
                'bg-lime-400 text-black': task.status==='COMPLETED',
                'bg-orange-400 text-black': task.status==='PENDING',
                'bg-cyan-300 text-black': task.status==='IN_PROGRESS'
              }"
            >
              {{ task.status }}
            </span>
          </div>

          <div class="text-xs text-black font-bold bg-gray-100 border-2 border-black p-2 space-y-1">
            <p class="break-words">‚Üí CREATED BY: {{ task.createdByName || 'Unknown' }}</p>
            <p class="break-words">‚Üí ASSIGNED TO: {{ task.assignedToName || 'Unknown' }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Sidebar (1 column) - Performance, Teams, Users stacked -->
    <div class="lg:col-span-1 space-y-4">
      <!-- Performance -->
      <div class="bg-linear-to-br from-blue-100 to-purple-200 border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
        <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black gap-3">
          <div>
            <h3 class="text-xl font-bold text-black uppercase">üìä PERFORMANCE</h3>
            <p class="text-black text-xs font-bold">Team-wide metrics</p>
          </div>
          <button
            class="px-3 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-xs hover:bg-cyan-500"
            (click)="state.loadPerformance()"
          >
            ‚Üª
          </button>
        </div>

        <div *ngIf="!perf" class="text-center bg-white border-2 border-black p-4">
          <p class="text-3xl mb-2">üìà</p>
          <p class="text-black font-bold uppercase text-sm">NO DATA YET</p>
        </div>

        <div *ngIf="perf as p" class="space-y-3">
          <!-- KPI cards -->
          <div class="grid grid-cols-2 gap-2">
            <div class="p-2 border-3 border-black bg-yellow-300 text-black shadow-[2px_2px_0_0_rgba(0,0,0,1)]">
              <p class="text-xs font-bold uppercase">Total</p>
              <p class="text-2xl font-extrabold">{{ p.totalTasks }}</p>
            </div>

            <div class="p-2 border-3 border-black bg-lime-300 text-black shadow-[2px_2px_0_0_rgba(0,0,0,1)]">
              <p class="text-xs font-bold uppercase">Done</p>
              <p class="text-2xl font-extrabold">{{ p.completedTasks }}</p>
            </div>

            <div class="p-2 border-3 border-black bg-blue-300 text-black shadow-[2px_2px_0_0_rgba(0,0,0,1)]">
              <p class="text-xs font-bold uppercase">In Prog</p>
              <p class="text-2xl font-extrabold">{{ p.inProgressTasks }}</p>
            </div>

            <div class="p-2 border-3 border-black bg-orange-300 text-black shadow-[2px_2px_0_0_rgba(0,0,0,1)]">
              <p class="text-xs font-bold uppercase">Pending</p>
              <p class="text-2xl font-extrabold">{{ p.pendingTasks }}</p>
            </div>
          </div>

          <div class="text-xs font-bold text-green-700 bg-green-200 border-2 border-black p-2">
            ‚úì COMPLETION: {{ p.completionRatePercent | number:'1.0-1' }}%
          </div>
        </div>
      </div>

      <!-- Teams -->
      <div class="bg-linear-to-br from-purple-200 to-pink-200 border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
        <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black gap-3">
          <div>
            <h3 class="text-xl font-bold text-black uppercase">üë• TEAMS</h3>
            <p class="text-black text-xs font-bold">All teams</p>
          </div>
          <button
            class="px-3 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-xs hover:bg-cyan-500"
            (click)="state.loadAllTeams()"
          >
            ‚Üª
          </button>
        </div>

        <div *ngIf="!teams.length" class="text-center bg-white border-2 border-black p-4">
          <p class="text-3xl mb-2">üë•</p>
          <p class="text-black font-bold uppercase text-sm">NO TEAMS YET</p>
        </div>

        <div *ngIf="teams.length" class="space-y-2">
          <div
            *ngFor="let team of teams"
            class="bg-white border-3 border-black p-2 shadow-[2px_2px_0_0_rgba(0,0,0,1)]"
          >
            <p class="text-sm font-bold text-black break-words">{{ team.name }}</p>
            <p class="text-xs text-gray-700">üëë {{ team.leadName }}</p>
          </div>
        </div>
      </div>

      <!-- Users -->
      <div class="bg-linear-to-br from-lime-200 to-green-300 border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
        <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black gap-3">
          <div>
            <h3 class="text-xl font-bold text-black uppercase">üë§ USERS</h3>
            <p class="text-black text-xs font-bold">Roles overview</p>
          </div>
          <button
            class="px-3 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-xs hover:bg-cyan-500"
            (click)="state.loadAllUsers()"
          >
            ‚Üª
          </button>
        </div>

        <div *ngIf="!users.length" class="text-center bg-white border-2 border-black p-4">
          <p class="text-3xl mb-2">üë§</p>
          <p class="text-black font-bold uppercase text-sm">NO USERS YET</p>
        </div>

        <div *ngIf="users.length" class="space-y-2 max-h-64 overflow-y-auto">
          <div
            *ngFor="let u of users"
            class="bg-white border-3 border-black p-2 shadow-[2px_2px_0_0_rgba(0,0,0,1)] flex items-center justify-between gap-2"
          >
            <div class="min-w-0">
              <p class="text-sm font-bold text-black break-words">{{ u.fullName }}</p>
              <p class="text-xs text-gray-600 break-words">{{ u.email }}</p>
            </div>

            <span
              class="px-2 py-1 border-2 border-black text-xs font-bold shrink-0"
              [ngClass]="{
                'bg-red-500 text-white': u.role==='ADMIN',
                'bg-yellow-400 text-black': u.role==='MANAGER',
                'bg-blue-400 text-white': u.role==='EMPLOYEE',
                'bg-purple-400 text-white': u.role==='TEAM_LEAD'
              }"
            >
              {{ u.role }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
