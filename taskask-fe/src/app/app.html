<div class="min-h-screen bg-gray-400 p-4 md:p-8 font-mono">
  <!-- Retro Grid Background -->
  <div class="fixed inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgb3BhY2l0eT0iMC4wMyIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2dyaWQpIi8+PC9zdmc+')] opacity-50"></div>

  <div class="max-w-7xl mx-auto relative">
    <!-- Retro Banner -->
    <div class="mb-4">
      <div class="h-2 bg-linear-to-r from-cyan-400 via-purple-400 to-pink-400"></div>
      <div class="h-1 bg-linear-to-r from-yellow-400 via-green-400 to-blue-400"></div>
    </div>

    <!-- Header -->
    <header class="mb-6 relative">
      <div class="bg-blue-600 border-4 border-black shadow-[4px_4px_0_0_rgba(0,0,0,1)] p-4 mb-4">
        <div class="flex items-center justify-between flex-wrap gap-4">
          <div class="flex items-center space-x-3">
            <!-- Retro Logo -->
            <div class="relative">
              <div class="w-12 h-12 bg-yellow-400 border-4 border-black flex items-center justify-center animate-pulse">
                <span class="text-2xl font-bold text-black">T</span>
              </div>
            </div>
            
            <div>
              <h1 class="text-3xl md:text-4xl font-bold text-white tracking-wider" style="text-shadow: 3px 3px 0 #000;">
                {{ title() }}
              </h1>
              <p class="text-yellow-300 text-sm font-bold">{{ tagline() }}</p>
            </div>
          </div>

          <!-- User Panel -->
          <div class="flex items-center space-x-3" *ngIf="isLoggedIn()">
            <div class="text-right hidden md:block bg-yellow-400 border-2 border-black px-3 py-2">
              <p class="text-xs font-bold text-black">{{ userEmail() }}</p>
              <span class="text-xs bg-black text-yellow-400 px-2 py-1 font-bold">
                {{ userRole() || 'USER' }}
              </span>
            </div>
            <button 
              (click)="logout()"
              class="px-4 py-2 bg-red-600 text-white border-4 border-black shadow-[2px_2px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all font-bold uppercase text-sm"
            >
              ‚Üê LOGOUT
            </button>
          </div>
        </div>
      </div>

      <!-- Marquee -->
      <div class="bg-yellow-400 border-2 border-black p-2 overflow-hidden">
        <div class="whitespace-nowrap animate-[scroll_20s_linear_infinite] inline-block">
          <span class="text-black font-bold">‚òÖ WELCOME TO TASKASK ‚òÖ GET THINGS DONE ‚òÖ MANAGE YOUR TEAM ‚òÖ RETRO STYLE ‚òÖ </span>
          <span class="text-black font-bold">‚òÖ WELCOME TO TASKASK ‚òÖ GET THINGS DONE ‚òÖ MANAGE YOUR TEAM ‚òÖ RETRO STYLE ‚òÖ </span>
        </div>
      </div>
    </header>

    <style>
      @keyframes scroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
      }
    </style>

    <!-- Main Content Grid -->
    <main class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
      <!-- Left Column - Auth & Metrics -->
      <div class="lg:col-span-1 space-y-4">
        <!-- Auth Card -->
        <div class="bg-white border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
          <div class="flex items-center justify-between mb-4 border-b-4 border-dotted border-black pb-3">
            <div>
              <h2 class="text-xl font-bold text-black uppercase tracking-wide">‚ö° ACCESS ‚ö°</h2>
              <p class="text-black text-xs font-bold">Sign in or create account</p>
            </div>
            <div class="w-16 h-16 bg-linear-to-br from-lime-400 to-green-500 border-4 border-black flex items-center justify-center font-bold text-lg">
              {{ isLoggedIn() ? '‚úì' : '‚úó' }}
            </div>
          </div>

          <div *ngIf="!isLoggedIn()" class="space-y-3">
            <div class="flex bg-gray-300 p-1 border-2 border-black">
              <button
                [ngClass]="authMode() === 'login' ? 'flex-1 py-2 bg-cyan-400 border-2 border-black font-bold' : 'flex-1 py-2 text-black font-bold'"
                (click)="setAuthMode('login')">LOGIN</button>
              <button
                [ngClass]="authMode() === 'signup' ? 'flex-1 py-2 bg-cyan-400 border-2 border-black font-bold' : 'flex-1 py-2 text-black font-bold'"
                (click)="setAuthMode('signup')">SIGN UP</button>
            </div>

            <ng-container *ngIf="authMode() === 'login'; else signupBlock">
              <label class="text-xs text-black font-bold flex flex-col gap-1">
                <span>EMAIL:</span>
                <input [(ngModel)]="loginEmail" class="border-2 border-black px-2 py-2 bg-white font-mono text-sm" placeholder="you@company.com" />
              </label>
              <label class="text-xs text-black font-bold flex flex-col gap-1">
                <span>PASSWORD:</span>
                <input type="password" [(ngModel)]="loginPassword" class="border-2 border-black px-2 py-2 bg-white font-mono text-sm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
              </label>
              <button (click)="login()" [disabled]="isLoading()" class="w-full py-3 bg-lime-400 border-4 border-black shadow-[4px_4px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all text-black font-bold uppercase">
                {{ isLoading() ? '‚è≥ SIGNING IN...' : '‚Üí SIGN IN' }}
              </button>
            </ng-container>

            <ng-template #signupBlock>
              <label class="text-xs text-black font-bold flex flex-col gap-1">
                <span>FULL NAME:</span>
                <input [(ngModel)]="signupFullName" class="border-2 border-black px-2 py-2 bg-white font-mono text-sm" placeholder="Jordan Smith" />
              </label>
              <label class="text-xs text-black font-bold flex flex-col gap-1">
                <span>EMAIL:</span>
                <input type="email" [(ngModel)]="signupEmail" class="border-2 border-black px-2 py-2 bg-white font-mono text-sm" placeholder="you@company.com" />
              </label>
              <label class="text-xs text-black font-bold flex flex-col gap-1">
                <span>PASSWORD:</span>
                <input type="password" [(ngModel)]="signupPassword" class="border-2 border-black px-2 py-2 bg-white font-mono text-sm" placeholder="Create password" />
              </label>
              <label class="text-xs text-black font-bold flex flex-col gap-1">
                <span>ROLE:</span>
                <select [(ngModel)]="signupRole" class="border-2 border-black px-2 py-2 bg-white font-mono text-sm">
                  <option value="EMPLOYEE">EMPLOYEE</option>
                  <option value="MANAGER">MANAGER</option>
                  <option value="ADMIN">ADMIN</option>
                </select>
              </label>
              <button (click)="signup()" [disabled]="isLoading()" class="w-full py-3 bg-pink-400 border-4 border-black shadow-[4px_4px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all text-black font-bold uppercase">
                {{ isLoading() ? '‚è≥ CREATING...' : '‚òÖ CREATE ACCOUNT' }}
              </button>
            </ng-template>
          </div>

          <div *ngIf="isLoggedIn()" class="space-y-2">
            <div class="bg-lime-100 border-2 border-black p-2">
              <p class="text-xs font-bold text-black">LOGGED IN AS:</p>
              <p class="text-sm font-bold text-black wrap-break-word">{{ userEmail() }}</p>
            </div>
            <div class="flex gap-2">
              <button (click)="loadTasks()" class="flex-1 py-2 border-2 border-black bg-yellow-300 text-black font-bold hover:bg-yellow-400">‚Üª REFRESH</button>
              <button (click)="logout()" class="flex-1 py-2 bg-red-500 text-white border-2 border-black font-bold hover:bg-red-600">‚úó LOGOUT</button>
            </div>
          </div>

          <div class="space-y-2 mt-3">
            <p *ngIf="authMessage()" class="text-xs font-bold text-green-700 bg-green-200 border-2 border-black p-2">‚úì {{ authMessage() }}</p>
            <p *ngIf="authError()" class="text-xs font-bold text-red-700 bg-red-200 border-2 border-black p-2">‚úó {{ authError() }}</p>
          </div>
        </div>

        <!-- Metrics -->
        <div class="grid grid-cols-2 gap-4">
          <!-- Task Count -->
          <div class="bg-linear-to-br from-cyan-300 to-blue-400 border-4 border-black shadow-[4px_4px_0_0_rgba(0,0,0,1)] p-3">
            <div class="flex items-center justify-between mb-2">
              <span class="text-xs font-bold text-black uppercase">TASKS</span>
              <span class="text-2xl">üìã</span>
            </div>
            <p class="text-4xl font-bold text-black" style="text-shadow: 2px 2px 0 #fff;">{{ filteredTasks().length || 0 }}</p>
            <p class="text-xs text-black font-bold mt-1">ACTIVE</p>
          </div>

          <!-- Team Count -->
          <div class="bg-linear-to-br from-pink-300 to-purple-400 border-4 border-black shadow-[4px_4px_0_0_rgba(0,0,0,1)] p-3" *ngIf="userRole() === 'MANAGER'">
            <div class="flex items-center justify-between mb-2">
              <span class="text-xs font-bold text-black uppercase">TEAM</span>
              <span class="text-2xl">üë•</span>
            </div>
            <p class="text-4xl font-bold text-black" style="text-shadow: 2px 2px 0 #fff;">{{ employees().length }}</p>
            <p class="text-xs text-black font-bold mt-1">MEMBERS</p>
          </div>
        </div>
      </div>

      <!-- Right Column - Tasks & Create -->
      <div class="lg:col-span-2 space-y-4">
        <!-- Create Task (Manager Only) -->
        <div *ngIf="isLoggedIn() && userRole() === 'MANAGER'" class="bg-linear-to-br from-lime-200 to-green-300 border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
          <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black">
            <div>
              <h2 class="text-2xl font-bold text-black uppercase">‚úèÔ∏è CREATE NEW TASK</h2>
              <p class="text-black text-xs font-bold">Assign work to your team</p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-xs font-bold text-black mb-1 uppercase">TASK TITLE:</label>
              <input 
                [(ngModel)]="newTaskTitle"
                class="w-full px-3 py-2 bg-white border-2 border-black font-mono text-sm"
                placeholder="Draft Q1 campaign plan"
              />
            </div>
            <div>
              <label class="block text-xs font-bold text-black mb-1 uppercase">ASSIGN TO:</label>
              <select 
                [(ngModel)]="newTaskAssigneeId"
                class="w-full px-3 py-2 bg-white border-2 border-black font-mono text-sm"
              >
                <option value="">Select employee...</option>
                <option *ngFor="let emp of employees()" [value]="emp.id">{{ emp.fullName }} - {{ emp.email }}</option>
              </select>
            </div>
            <div class="md:col-span-2">
              <label class="block text-xs font-bold text-black mb-1 uppercase">DESCRIPTION:</label>
              <textarea 
                rows="3"
                [(ngModel)]="newTaskDescription"
                class="w-full px-3 py-2 bg-white border-2 border-black font-mono text-sm resize-none"
                placeholder="Add context and objectives..."
              ></textarea>
            </div>
            <div>
              <label class="block text-xs font-bold text-black mb-1 uppercase">PRIORITY:</label>
              <select 
                [(ngModel)]="newTaskPriority"
                class="w-full px-3 py-2 bg-white border-2 border-black font-mono text-sm"
              >
                <option value="LOW">LOW</option>
                <option value="MEDIUM">MEDIUM</option>
                <option value="HIGH">HIGH</option>
              </select>
            </div>
            <div>
              <label class="block text-xs font-bold text-black mb-1 uppercase">DUE DATE:</label>
              <input 
                type="date"
                [(ngModel)]="newTaskDueDate"
                class="w-full px-3 py-2 bg-white border-2 border-black font-mono text-sm"
              />
            </div>
          </div>

          <div class="flex items-center justify-between mt-4 pt-4 border-t-4 border-dotted border-black">
            <div class="flex-1">
              <p *ngIf="taskMessage()" class="text-green-700 font-bold text-xs bg-green-200 border-2 border-black px-2 py-1">‚úì {{ taskMessage() }}</p>
              <p *ngIf="taskError()" class="text-red-700 font-bold text-xs bg-red-200 border-2 border-black px-2 py-1">‚úó {{ taskError() }}</p>
            </div>
            <button 
              (click)="createTask()"
              class="px-6 py-3 bg-yellow-400 border-4 border-black shadow-[4px_4px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-none transition-all text-black font-bold uppercase flex items-center space-x-2"
            >
              <span>‚òÖ CREATE TASK ‚òÖ</span>
            </button>
          </div>
        </div>

        <!-- Employee Task Panel -->
        <div *ngIf="userRole() === 'EMPLOYEE'" class="bg-white border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
          <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black">
            <div>
              <h2 class="text-2xl font-bold text-black uppercase">üìù YOUR TASKS</h2>
              <p class="text-black text-xs font-bold">Assigned to you</p>
            </div>
            <button (click)="loadTasks()" class="px-4 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-sm hover:bg-cyan-500">
              ‚Üª REFRESH
            </button>
          </div>

          <div class="space-y-2 mb-4">
            <p class="text-xs uppercase font-bold text-black">FILTER:</p>
            <div class="flex flex-wrap gap-2">
              <button
                *ngFor="let filter of statusFilters"
                [ngClass]="statusFilter() === filter.value ? 'bg-yellow-400 border-4 border-black' : 'bg-gray-200 border-2 border-black'"
                (click)="setFilter(filter.value)"
                class="px-3 py-1 font-bold text-xs uppercase hover:bg-yellow-300 transition-colors"
              >
                {{ filter.label }}
              </button>
            </div>
          </div>

          <div *ngIf="filteredTasks().length === 0" class="text-center bg-gray-100 border-2 border-black p-6">
            <p class="text-black font-bold">NO TASKS ASSIGNED YET</p>
            <p class="text-xs text-black mt-1">Check back later!</p>
          </div>

          <div class="space-y-3" *ngIf="filteredTasks().length > 0">
            <div *ngFor="let task of filteredTasks()" class="border-4 border-black bg-linear-to-br from-white to-gray-100 p-3 shadow-[4px_4px_0_0_rgba(0,0,0,1)]">
              <div class="flex items-start justify-between gap-3 mb-3">
                <div class="min-w-0">
                  <p class="text-xs text-black font-bold">DUE: {{ task.dueDate || 'NO DEADLINE' }}</p>
                  <h3 class="text-lg font-bold text-black wrap-break-word">{{ task.title }}</h3>
                  <p class="text-sm text-black wrap-break-word">{{ task.description || 'No description' }}</p>
                </div>
                <div class="flex flex-col gap-1 text-right">
                  <div class="px-2 py-1 bg-black text-white text-xs font-bold">
                    {{ task.priority || 'MEDIUM' }}
                  </div>
                  <div [ngClass]="{
                    'bg-lime-300 border-2 border-black': task.status === 'COMPLETED',
                    'bg-yellow-300 border-2 border-black': task.status === 'PENDING'
                  }" class="px-2 py-1 text-xs font-bold">
                    {{ task.status }}
                  </div>
                </div>
              </div>

              <div class="grid grid-cols-1 sm:grid-cols-3 gap-2 mt-3 pt-3 border-t-2 border-dotted border-black">
                <label class="text-xs text-black font-bold flex flex-col gap-1">
                  <span>PRIORITY:</span>
                  <select [(ngModel)]="priorityChoice[task.id]" class="border-2 border-black px-2 py-1 bg-white font-mono text-xs">
                    <option *ngFor="let p of priorityOptions" [value]="p">{{ p }}</option>
                  </select>
                </label>
                <label class="text-xs text-black font-bold flex flex-col gap-1">
                  <span>STATUS:</span>
                  <select [(ngModel)]="statusChoice[task.id]" class="border-2 border-black px-2 py-1 bg-white font-mono text-xs">
                    <option *ngFor="let s of statusOptions" [value]="s">{{ s }}</option>
                  </select>
                </label>
                <div class="flex items-end">
                  <button (click)="updateTask(task.id, statusChoice[task.id], priorityChoice[task.id])" class="w-full px-3 py-2 bg-lime-400 border-2 border-black font-bold uppercase text-xs hover:bg-lime-500">
                    SAVE
                  </button>
                </div>
              </div>

              <div class="mt-3 text-xs text-black font-bold space-y-1 bg-gray-100 border-2 border-black p-2">
                <p>‚Üí ASSIGNED: {{ getUserLabel(task.assignedToUserId) }}</p>
                <p>‚Üí CREATED BY: {{ getUserLabel(task.createdByUserId) }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Task Board (Manager/Admin) -->
        <div *ngIf="userRole() === 'MANAGER' || userRole() === 'ADMIN'" class="bg-white border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
          <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black">
            <div>
              <h2 class="text-2xl font-bold text-black uppercase">
                {{ userRole() === 'ADMIN' ? 'üîê ALL TASKS (ADMIN)' : 'üìä TASK BOARD' }}
              </h2>
              <p class="text-black text-xs font-bold">All tasks with current filters</p>
            </div>
            <button 
              (click)="loadRoleData(userRole())"
              class="px-4 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-sm hover:bg-cyan-500"
            >
              ‚Üª REFRESH
            </button>
          </div>

          <div class="space-y-2 mb-4">
            <p class="text-xs uppercase font-bold text-black">FILTER:</p>
            <div class="flex flex-wrap gap-2">
              <button
                *ngFor="let filter of statusFilters"
                [ngClass]="statusFilter() === filter.value ? 'bg-yellow-400 border-4 border-black' : 'bg-gray-200 border-2 border-black'"
                (click)="setFilter(filter.value)"
                class="px-3 py-1 font-bold text-xs uppercase hover:bg-yellow-300 transition-colors"
              >
                {{ filter.label }}
              </button>
            </div>
          </div>

          <!-- Empty State -->
          <div *ngIf="filteredTasks().length === 0" class="text-center bg-gray-100 border-2 border-black p-8">
            <p class="text-4xl mb-2">üìã</p>
            <p class="text-black font-bold uppercase">NO TASKS YET</p>
            <p class="text-xs text-black mt-1">Create one or refresh!</p>
          </div>

          <!-- Task Grid -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-3" *ngIf="filteredTasks().length > 0">
            <div 
              *ngFor="let task of filteredTasks()"
              class="bg-linear-to-br from-white to-gray-100 border-4 border-black p-3 shadow-[4px_4px_0_0_rgba(0,0,0,1)] hover:translate-x-0.5 hover:translate-y-0.5 hover:shadow-[2px_2px_0_0_rgba(0,0,0,1)] transition-all"
            >
              <!-- Task Header -->
              <div class="flex items-start justify-between mb-3">
                <div class="flex-1 min-w-0">
                  <div class="flex flex-wrap items-center gap-1 mb-2">
                    <span [ngClass]="{
                      'bg-red-500 text-white': task.priority === 'HIGH',
                      'bg-yellow-400 text-black': task.priority === 'MEDIUM',
                      'bg-blue-400 text-white': task.priority === 'LOW'
                    }" class="px-2 py-1 border-2 border-black text-xs font-bold">
                      {{ task.priority }}
                    </span>
                    <span [ngClass]="{
                      'bg-lime-400 text-black': task.status === 'COMPLETED',
                      'bg-orange-400 text-black': task.status === 'PENDING'
                    }" class="px-2 py-1 border-2 border-black text-xs font-bold">
                      {{ task.status }}
                    </span>
                  </div>
                  <h3 class="text-base font-bold text-black wrap-break-word mb-1">{{ task.title }}</h3>
                  <p class="text-black text-xs wrap-break-word">{{ task.description || 'No description' }}</p>
                </div>
                <div class="text-right ml-2">
                  <p class="text-xs text-black font-bold">DUE:</p>
                  <p class="text-xs font-bold text-black">{{ task.dueDate || 'NONE' }}</p>
                </div>
              </div>

              <!-- Task Meta -->
              <div class="flex flex-col gap-2 mt-3 pt-3 border-t-2 border-dotted border-black">
                <div class="flex items-center justify-between gap-2 text-xs text-black font-bold">
                  <div class="flex items-center gap-1 min-w-0">
                    <div class="w-5 h-5 bg-linear-to-br from-purple-400 to-purple-600 border-2 border-black flex items-center justify-center shrink-0">
                      <span class="text-xs text-white">{{ getUserLabel(task.assignedToUserId)?.[0] }}</span>
                    </div>
                    <span class="wrap-break-word">‚Üí {{ getUserLabel(task.assignedToUserId) }}</span>
                  </div>
                </div>
                <div class="flex items-center justify-between gap-2 text-xs text-black font-bold">
                  <div class="flex items-center gap-1 min-w-0">
                    <div class="w-5 h-5 bg-linear-to-br from-orange-400 to-orange-600 border-2 border-black flex items-center justify-center shrink-0">
                      <span class="text-xs text-white">{{ getUserLabel(task.createdByUserId)?.[0] }}</span>
                    </div>
                    <span class="wrap-break-word">BY: {{ getUserLabel(task.createdByUserId) }}</span>
                  </div>
                </div>
                
                <!-- Manager/Admin Actions -->
                <div class="flex flex-wrap gap-2 mt-2" *ngIf="userRole() === 'MANAGER' || userRole() === 'ADMIN'">
                  <button 
                    (click)="updateTask(task.id, 'COMPLETED', task.priority || 'MEDIUM')"
                    [disabled]="task.status === 'COMPLETED'"
                    class="px-3 py-2 bg-lime-400 border-2 border-black font-bold text-xs uppercase hover:bg-lime-500 disabled:opacity-60 disabled:cursor-not-allowed"
                  >
                    COMPLETE
                  </button>
                  <button 
                    (click)="deleteTask(task.id)"
                    class="px-3 py-2 bg-red-400 border-2 border-black font-bold text-xs uppercase hover:bg-red-500"
                  >
                    REMOVE
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Admin Performance Panel -->
        <div *ngIf="userRole() === 'ADMIN'" class="bg-linear-to-br from-blue-100 to-purple-200 border-4 border-black shadow-[6px_6px_0_0_rgba(0,0,0,1)] p-4">
          <div class="flex items-center justify-between mb-4 pb-3 border-b-4 border-dotted border-black">
            <div>
              <h2 class="text-2xl font-bold text-black uppercase">PERFORMANCE DASHBOARD</h2>
              <p class="text-black text-xs font-bold">Team-wide metrics & charts</p>
            </div>
            <button 
              (click)="loadPerformance()"
              class="px-4 py-2 bg-cyan-400 border-2 border-black font-bold uppercase text-sm hover:bg-cyan-500"
            >
              REFRESH
            </button>
          </div>

          <div *ngIf="performance(); else noPerfData" class="space-y-4">
            <!-- Summary cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div class="p-3 border-3 border-black bg-yellow-300 text-black shadow-[3px_3px_0_0_rgba(0,0,0,1)]">
                <p class="text-xs font-bold uppercase">Total</p>
                <p class="text-3xl font-extrabold">{{ performance()?.totalTasks }}</p>
              </div>
              <div class="p-3 border-3 border-black bg-lime-300 text-black shadow-[3px_3px_0_0_rgba(0,0,0,1)]">
                <p class="text-xs font-bold uppercase">Completed</p>
                <p class="text-3xl font-extrabold">{{ performance()?.completedTasks }}</p>
              </div>
              <div class="p-3 border-3 border-black bg-blue-300 text-black shadow-[3px_3px_0_0_rgba(0,0,0,1)]">
                <p class="text-xs font-bold uppercase">In Progress</p>
                <p class="text-3xl font-extrabold">{{ performance()?.inProgressTasks }}</p>
              </div>
              <div class="p-3 border-3 border-black bg-orange-300 text-black shadow-[3px_3px_0_0_rgba(0,0,0,1)]">
                <p class="text-xs font-bold uppercase">Pending</p>
                <p class="text-3xl font-extrabold">{{ performance()?.pendingTasks }}</p>
              </div>
            </div>

            <p class="text-sm font-bold text-black bg-white border-2 border-black px-3 py-2 inline-block">
              Completion rate: {{ performance()?.completionRatePercent | number:'1.0-1' }}%
            </p>

            <!-- Completion Gauge -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="bg-white border-3 border-black p-3 shadow-[3px_3px_0_0_rgba(0,0,0,1)] flex flex-col items-center justify-center">
                <p class="text-xs font-bold text-black uppercase mb-2">Completion gauge</p>
                <div 
                  class="w-28 h-28 rounded-full border-4 border-black flex items-center justify-center text-center text-black font-extrabold"
                  [style.background]=" 'conic-gradient(#22c55e ' + ((performance()?.completionRatePercent || 0) > 100 ? 100 : (performance()?.completionRatePercent || 0)) + '%, #e2e8f0 0)' ">
                  <div class="w-18 h-18 bg-white rounded-full border-2 border-black flex items-center justify-center text-sm font-bold">
                    {{ performance()?.completionRatePercent | number:'1.0-1' }}%
                  </div>
                </div>
              </div>

            </div>

            <!-- Employee performance bar chart -->
            <div *ngIf="performance()?.userStats?.length" class="bg-white border-3 border-black p-3 shadow-[3px_3px_0_0_rgba(0,0,0,1)]">
              <p class="text-sm font-bold text-black mb-2 uppercase">Employee performance (completed vs total)</p>
              <div class="space-y-3">
                <div *ngFor="let stat of performance()?.userStats">
                  <div class="flex justify-between text-xs font-bold text-black">
                    <span class="truncate">{{ stat.fullName }}</span>
                    <span>{{ stat.completedTasks }}/{{ stat.totalTasks }}</span>
                  </div>
                  <div class="w-full bg-gray-200 border-2 border-black h-5 relative overflow-hidden">
                    <div 
                      class="h-full bg-lime-400"
                      [style.width.%]="stat.totalTasks ? (stat.completedTasks * 100) / stat.totalTasks : 0">
                    </div>
                    <div 
                      class="absolute inset-0 border-l-2 border-black opacity-30"
                      *ngIf="stat.totalTasks === 0">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Simple bar chart -->
            <div *ngIf="performance()?.userStats?.length" class="bg-white border-3 border-black p-3 shadow-[3px_3px_0_0_rgba(0,0,0,1)]">
              <p class="text-sm font-bold text-black mb-2 uppercase">User completion chart</p>
              <div class="space-y-2">
                <div *ngFor="let stat of performance()?.userStats" class="space-y-1">
                  <div class="flex justify-between text-xs font-bold text-black">
                    <span>{{ stat.fullName }}</span>
                    <span>{{ stat.completionRatePercent | number:'1.0-1' }}% ({{ stat.completedTasks }}/{{ stat.totalTasks }})</span>
                  </div>
                  <div class="w-full bg-gray-200 border-2 border-black h-4 relative">
                    <div 
                      class="h-full bg-linear-to-r from-green-400 via-yellow-300 to-red-400"
                      [style.width.%]="stat.completionRatePercent > 100 ? 100 : stat.completionRatePercent">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <ng-template #noPerfData>
            <div class="text-center bg-white border-3 border-black p-4 text-black font-bold">
              No performance data yet. Try refreshing after tasks exist.
            </div>
          </ng-template>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="text-center py-6 border-t-4 border-black mt-6 bg-yellow-300 text-black font-bold">
      <p>TaskAsk Retro Edition (C) {{ currentYear }}</p>
    </footer>
  </div>
</div>
